<div class="products-container">
    <h1 class="title">Productos</h1>
  <div class="options">
<select id="sort-select" class="option-select" onchange="window.location.href='?{{#if category}}category={{category}}&{{/if}}{{#if page}}page={{page}}&{{/if}}{{#if limit}}limit={{limit}}&{{/if}}{{#if status}}status={{status}}&{{/if}}sort='+this.value">
    <option value="">Ordenar por</option>
    <option value="asc" {{isSelected "asc" sort}}">Menor precio</option>
    <option value="desc" {{isSelected "desc" sort}}">Mayor precio</option>
  </select>
  
  <select id="page-select" class="option-select" onchange="window.location.href='?sort={{sort}}&page='+this.value+'&limit={{limit}}'">
    {{#forPages totalPages}}
      <option value="{{this}}" {{isSelected this page}}>{{this}} de {{totalPages}}</option>
    {{/forPages}}
  </select>
  
  <select id="limit-select" class="option-select" onchange="window.location.href='?{{#if category}}category={{category}}&{{/if}}{{#if page}}page={{page}}&{{/if}}{{#if sort}}sort={{sort}}&{{/if}}{{#if status}}status={{status}}&{{/if}}limit='+this.value">
  <option value="" {{isSelected "" limit}}>Mostrar por página</option>
  <option value="5" {{isSelected "5" limit}}>5 productos</option>
  <option value="10" {{isSelected "10" limit}}>10 productos</option>
  <option value="20" {{isSelected "20" limit}}>20 productos</option>
  <option value="50" {{isSelected "50" limit}}>50 productos</option>
</select>

<select id="status-select" class="option-select" onchange="window.location.href='?{{#if sort}}sort={{sort}}&{{/if}}{{#if page}}page={{page}}&{{/if}}{{#if limit}}limit={{limit}}&{{/if}}{{#if category}}category={{category}}&{{/if}}status='+this.value">
    <option value="">Todos</option>
    <option value="true" {{isSelected "true" status}}>Disponibles</option>
    <option value="false" {{isSelected "false" status}}>No disponibles</option>
  </select>

<select id="category-select" class="option-select" onchange="window.location.href='?{{#if sort}}sort={{sort}}&{{/if}}{{#if page}}page={{page}}&{{/if}}{{#if limit}}limit={{limit}}&{{/if}}{{#if status}}status={{status}}&{{/if}}category='+this.value">
    <option value="">Elegir categoría</option>
        <option value="">Todas las categoría</option>
    {{#each categories}}
      <option value="{{this}}" {{isSelected this category}}>{{this}}</option>
    {{/each}}
  </select>
  </div>  

  <nav class="pagination">
  {{#if_gt page 1}}
    <a href="?sort={{sort}}&page={{subtract page 1}}&limit={{limit}}&status={{status}}" title="Ir a la página anterior" aria-label="Página anterior">
      Anterior
    </a>
  {{else}}
    <span aria-label="Primera página">Primera página</span>
  {{/if_gt}}
  {{#if_gt totalPages page}}
    <a href="?sort={{sort}}&page={{add page 1}}&limit={{limit}}&status={{status}}" title="Ir a la página siguiente" aria-label="Página siguiente">
      Siguiente
    </a>
  {{else}}
    <span aria-label="Última página">No hay más páginas</span>
  {{/if_gt}}
</nav>
  <ul class="products-list">
    {{#each products}}
    <li class="product">
      <h2>{{title}}</h2>
      <h3>Precio:</h3>
      <p>${{price}}</p>
      <button class="btn-link">
        <a href="/products/{{id}}">Ver detalles</a>
      </button>
      <button class="btn-primary">
        Agregar al carrito
      </button>
    </li>
    {{/each}}
  </ul>
</div>